module.exports=[84175,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(65233),e=a.i(41227),f=a.i(77860);function g(){let{showToast:a}=(0,e.useToast)(),[g,h]=(0,c.useState)([]),[i,j]=(0,c.useState)({courses_title:"",courses_description:""}),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)({title:"",slug:"",description:"",icon:"school",color:"bg-[#2b4a8a]",text_color:"text-white",is_special:!1,sort_order:0,is_active:!0,show_on_home:!1}),[o,p]=(0,c.useState)(!0),[q,r]=(0,c.useState)(!1);(0,c.useEffect)(()=>{s()},[]);let s=async()=>{try{let[a,b]=await Promise.all([fetch("/web/api/courses"),fetch("/web/api/courses/settings")]),c=await a.json(),d=await b.json();c.success&&h(c.courses),d.success&&j(d.settings),p(!1)}catch(a){console.error("Fetch failed:",a),p(!1)}},t=async b=>{b.preventDefault();try{(await fetch("/web/api/courses/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})).ok&&a("บันทึกการตั้งค่าส่วนหัวเรียบร้อยแล้ว","success")}catch(b){a("ไม่สามารถบันทึกการตั้งค่าได้","error")}},u=async(b,c)=>{let d=b.target.files[0];if(!d)return;r(!0);let e=new FormData;e.append("file",d);try{let b=await fetch("/web/api/upload",{method:"POST",body:e}),f=await b.json();if(f.success){let b="";"image"===c?b=`<img src="${f.url}" alt="${d.name}" class="my-6 rounded-xl shadow-lg max-w-full" />
`:"pdf"===c&&(b=`<a href="${f.url}" target="_blank" class="inline-flex items-center gap-2 px-6 py-3 bg-red-50 text-red-600 rounded-xl font-bold hover:bg-red-100 transition-all my-4"><span class="material-icons">picture_as_pdf</span> ดาวน์โหลดเอกสาร (PDF) - ${d.name}</a>
`),n(a=>({...a,description:(a.description||"")+b})),a("อัปโหลดสื่อสำเร็จ","success")}else a("อัปโหลดไม่สำเร็จ: "+f.message,"error")}catch(b){console.error("Upload error:",b),a("เกิดข้อผิดพลาดในการอัปโหลด","error")}finally{r(!1),b.target.value=""}},v=a=>{let{name:b,value:c,type:d,checked:e}=a.target,f="checkbox"===d?e:c;n(a=>{let d={...a,[b]:f};return"title"!==b||a.slug&&a.slug!==a.title.toLowerCase().replace(/[^a-z0-9ก-ฮ]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")||(d.slug=c.toLowerCase().replace(/[^a-z0-9ก-ฮ]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")),d})},w=a=>{n({...a,image:a.image||"",is_special:!!a.is_special,show_on_home:!!a.show_on_home,is_active:!1!==a.is_active}),l(!0)},x=async b=>{b.preventDefault();let c=m.id?"PUT":"POST";try{(await fetch("/web/api/courses",{method:c,headers:{"Content-Type":"application/json"},body:JSON.stringify(m)})).ok&&(l(!1),s(),a("บันทึกข้อมูลหลักสูตรเรียบร้อยแล้ว","success"))}catch(b){a("เกิดข้อผิดพลาดในการบันทึกหลักสูตร","error")}},y=async b=>{if(confirm("Are you sure?"))try{(await fetch(`/web/api/courses?id=${b}`,{method:"DELETE"})).ok&&(s(),a("ลบหลักสูตรเรียบร้อยแล้ว","success"))}catch(b){a("เกิดข้อผิดพลาดในการลบ","error")}};return o?(0,b.jsx)("div",{className:"p-8 text-center text-slate-500",children:"กำลังโหลด..."}):(0,b.jsxs)("div",{className:"admin-layout",children:[(0,b.jsx)(d.default,{}),(0,b.jsxs)("div",{className:"admin-content",children:[(0,b.jsxs)("header",{className:"admin-header",children:[(0,b.jsx)("div",{className:"admin-header-left",children:(0,b.jsx)("h1",{className:"text-2xl font-bold text-slate-800",children:"จัดการหลักสูตร (Courses)"})}),!k&&(0,b.jsxs)("button",{onClick:()=>{n({title:"",slug:"",description:"",image:"",icon:"school",color:"bg-[#2b4a8a]",text_color:"text-white",is_special:!1,sort_order:g.length+1,is_active:!0,show_on_home:!1}),l(!0)},className:"btn-primary",style:{gap:"8px",padding:"10px 20px"},children:[(0,b.jsx)("span",{className:"material-icons",children:"add"})," เพิ่มหลักสูตรใหม่"]})]}),(0,b.jsxs)("main",{className:"admin-main",children:[!k&&(0,b.jsxs)("div",{className:"editor-card",style:{marginBottom:"32px",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,b.jsx)("div",{className:"p-2 bg-primary/10 rounded-lg",children:(0,b.jsx)("span",{className:"material-icons text-primary",children:"settings"})}),(0,b.jsx)("h2",{className:"text-lg font-bold text-slate-800",children:"ตั้งค่าส่วนหัวข้อหลักสูตร"})]}),(0,b.jsxs)("form",{onSubmit:t,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-slate-700 mb-1 block",children:"หัวข้อหลัก (Title)"}),(0,b.jsx)("input",{type:"text",className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary/20 transition-all",value:i.courses_title||"",onChange:a=>j({...i,courses_title:a.target.value}),placeholder:"เช่น หลักสูตรที่เปิดสอน"})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{className:"text-sm font-semibold text-slate-700 mb-1 block",children:"คำอธิบาย (Description)"}),(0,b.jsx)("textarea",{className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary/20 transition-all",value:i.courses_description||"",onChange:a=>j({...i,courses_description:a.target.value}),placeholder:"คำอธิบายสั้นๆ ใต้หัวข้อ",rows:2})]}),(0,b.jsx)("div",{className:"flex justify-end pt-2",children:(0,b.jsx)("button",{type:"submit",className:"btn-primary px-8",children:"บันทึกการตั้งค่าส่วนหัว"})})]})]}),k?(0,b.jsxs)("div",{className:"editor-card",style:{maxWidth:"900px",margin:"0 auto",boxShadow:"0 10px 25px -5px rgb(0 0 0 / 0.1)"},children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-8 pb-4 border-b border-slate-100",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-slate-800",children:m.id?"แก้ไขข้อมูลหลักสูตร":"เพิ่มหลักสูตรใหม่"}),(0,b.jsx)("button",{onClick:()=>l(!1),className:"text-slate-400 hover:text-slate-600 transition-colors",children:(0,b.jsx)("span",{className:"material-icons",children:"close"})})]}),(0,b.jsx)("form",{onSubmit:x,children:(0,b.jsxs)("div",{className:"grid md:grid-cols-12 gap-8",children:[(0,b.jsxs)("div",{className:"md:col-span-4 space-y-4",children:[(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{className:"text-sm font-bold text-slate-700 mb-2 block",children:"รูปภาพประกอบ (Large Feature Image)"}),(0,b.jsxs)("div",{style:{width:"100%",aspectRatio:"16/9",background:"#f8fafc",borderRadius:"12px",overflow:"hidden",border:"2px dashed #e2e8f0",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",position:"relative"},onClick:()=>document.getElementById("image-upload").click(),children:[m.image?(0,b.jsx)("img",{src:(0,f.normalizePath)(m.image),alt:"Preview",style:{width:"100%",height:"100%",objectFit:"cover"}}):(0,b.jsxs)("div",{className:"text-center p-4",children:[(0,b.jsx)("span",{className:"material-icons text-4xl text-slate-300 mb-2",children:"image"}),(0,b.jsx)("p",{className:"text-xs text-slate-400",children:"คลิกเพื่ออัปโหลดรูปภาพหลักสูตร"})]}),(0,b.jsx)("div",{className:"absolute inset-0 bg-black/0 hover:bg-black/5 transition-colors"})]}),(0,b.jsx)("input",{id:"image-upload",type:"file",accept:"image/*",onChange:a=>{let b=a.target.files[0];if(b){let a=new FileReader;a.onloadend=()=>{n(b=>({...b,image:a.result}))},a.readAsDataURL(b)}},className:"hidden"})]}),(0,b.jsx)("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-100",children:(0,b.jsxs)("p",{className:"text-xs text-slate-500 leading-relaxed",children:[(0,b.jsx)("span",{className:"font-bold text-primary block mb-1",children:"คำแนะนำ:"}),"ใช้รูปสัดส่วน 16:9 และมีขนาดไฟล์ไม่เกิน 2MB เพื่อการแสดงผลที่สวยงามในหน้าหลักและหน้าหลักสูตร"]})})]}),(0,b.jsxs)("div",{className:"md:col-span-8 space-y-6",children:[(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{className:"text-sm font-bold text-slate-700 mb-1 block",children:"ชื่อหลักสูตร"}),(0,b.jsx)("input",{type:"text",className:"w-full px-4 py-2.5 border border-slate-200 rounded-lg",name:"title",required:!0,value:m.title,onChange:v})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{className:"text-sm font-bold text-slate-700 mb-1 block",children:"ชื่อไอคอน (Google Icon)"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)("input",{type:"text",className:"w-full px-4 py-2.5 border border-slate-200 rounded-lg",name:"icon",value:m.icon,onChange:v,placeholder:"เช่น school, business"})}),(0,b.jsx)("div",{className:"w-12 h-11 bg-slate-100 rounded-lg flex items-center justify-center text-slate-600",children:(0,b.jsx)("span",{className:"material-icons",children:m.icon})})]})]})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsxs)("div",{className:"flex justify-between items-end mb-1",children:[(0,b.jsx)("label",{className:"text-sm font-bold text-slate-700 block",children:"รายละเอียด (เนื้อหาหลัก)"}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mr-1",children:"แทรกสื่อ:"}),(0,b.jsxs)("button",{type:"button",className:"flex items-center gap-1.5 px-3 py-1.5 bg-blue-50 text-blue-600 rounded-lg text-xs font-bold hover:bg-blue-100 transition-all",onClick:()=>document.getElementById("media-image-upload").click(),disabled:q,children:[(0,b.jsx)("span",{className:"material-icons text-sm",children:"image"})," ",q?"กำลังโหลด...":"รูปภาพ"]}),(0,b.jsxs)("button",{type:"button",className:"flex items-center gap-1.5 px-3 py-1.5 bg-red-50 text-red-600 rounded-lg text-xs font-bold hover:bg-red-100 transition-all",onClick:()=>document.getElementById("media-pdf-upload").click(),disabled:q,children:[(0,b.jsx)("span",{className:"material-icons text-sm",children:"picture_as_pdf"})," ",q?"กำลังโหลด...":"PDF"]}),(0,b.jsx)("input",{id:"media-image-upload",type:"file",accept:"image/*",className:"hidden",onChange:a=>u(a,"image")}),(0,b.jsx)("input",{id:"media-pdf-upload",type:"file",accept:"application/pdf",className:"hidden",onChange:a=>u(a,"pdf")})]})]}),(0,b.jsx)("textarea",{className:"w-full px-4 py-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-primary/20 transition-all font-sans text-sm leading-relaxed",name:"description",rows:8,value:m.description,onChange:v,placeholder:"ใส่รายละเอียดหลักสูตร จุดเด่น และสิ่งที่จะได้รับ... (รองรับ HTML สำหรับการแทรกรูป/ไฟล์)"}),(0,b.jsx)("p",{className:"text-[10px] text-slate-400 mt-1 italic",children:"* รองรับการแทรกโค้ด HTML หรือใช้ปุ่มด้านบนเพื่ออัปโหลดสื่อ"})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{className:"text-sm font-bold text-slate-700 mb-1 block",children:"สีการ์ด (Tailwind)"}),(0,b.jsx)("input",{type:"text",className:"w-full px-4 py-2.5 border border-slate-200 rounded-lg font-mono text-xs",name:"color",value:m.color,onChange:v,placeholder:"bg-[#2b4a8a]"})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{className:"text-sm font-bold text-slate-700 mb-1 block",children:"สีตัวอักษร (Tailwind)"}),(0,b.jsx)("input",{type:"text",className:"w-full px-4 py-2.5 border border-slate-200 rounded-lg font-mono text-xs",name:"text_color",value:m.text_color,onChange:v,placeholder:"text-white"})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{className:"text-sm font-bold text-slate-700 mb-1 block",children:"ลำดับ"}),(0,b.jsx)("input",{type:"number",className:"w-full px-4 py-2.5 border border-slate-200 rounded-lg",name:"sort_order",value:m.sort_order,onChange:v})]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-4 p-4 bg-primary/5 rounded-xl border border-primary/10",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"is_special",name:"is_special",checked:m.is_special,onChange:v,className:"w-5 h-5 accent-primary cursor-pointer"}),(0,b.jsx)("label",{htmlFor:"is_special",className:"text-sm font-bold text-navy cursor-pointer",children:"หลักสูตรแนะนำ (Special Highlight / Featured Course)"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 border-t border-primary/10 pt-3",children:[(0,b.jsx)("input",{type:"checkbox",id:"show_on_home",name:"show_on_home",checked:m.show_on_home,onChange:v,className:"w-5 h-5 accent-[#f2cc0d] cursor-pointer"}),(0,b.jsx)("label",{htmlFor:"show_on_home",className:"text-sm font-bold text-navy cursor-pointer",children:"แสดงในหน้าแรก (เลือกได้สูงสุด 3 วิชา)"})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-6 border-t border-slate-100",children:[(0,b.jsxs)("button",{type:"submit",className:"btn-primary flex-1 py-3 text-base shadow-lg shadow-primary/20",children:[(0,b.jsx)("span",{className:"material-icons text-xl",children:"save"})," ",m.id?"บันทึกการแก้ไข":"เพิ่มหลักสูตร"]}),(0,b.jsx)("button",{type:"button",onClick:()=>l(!1),className:"btn-secondary px-10 border-slate-200",children:"ยกเลิก"})]})]})]})})]}):(0,b.jsx)("div",{className:"admin-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"24px"},children:g.map(a=>(0,b.jsxs)("div",{className:"admin-card group",style:{background:"white",borderRadius:"16px",overflow:"hidden",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)",border:"1px solid #e2e8f0",display:"flex",flexDirection:"column",transition:"all 0.3s ease"},children:[(0,b.jsxs)("div",{className:"h-44 bg-slate-100 relative overflow-hidden",children:[a.image?(0,b.jsx)("img",{src:(0,f.normalizePath)(a.image),alt:a.title,style:{width:"100%",height:"100%",objectFit:"cover"}}):(0,b.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center text-slate-300",children:[(0,b.jsx)("span",{className:"material-icons text-5xl mb-2",children:"image"}),(0,b.jsx)("span",{className:"text-xs",children:"ไม่มีรูปภาพประกอบ"})]}),(0,b.jsx)("div",{className:`absolute top-0 right-0 p-3 ${a.color} ${a.text_color} rounded-bl-2xl shadow-lg`,children:(0,b.jsx)("span",{className:"material-icons",children:a.icon})}),a.is_special?(0,b.jsx)("div",{className:"absolute top-3 left-3 bg-yellow-400 text-navy px-2 py-1 rounded text-[10px] font-black tracking-tighter shadow-md",children:"FEATURED"}):null,a.show_on_home?(0,b.jsxs)("div",{className:"absolute top-3 right-12 bg-navy text-white px-2 py-1 rounded text-[10px] font-black tracking-tighter shadow-md flex items-center gap-1",children:[(0,b.jsx)("span",{className:"material-icons text-[10px]",children:"home"})," HOME"]}):null,(0,b.jsxs)("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-3 backdrop-blur-[2px]",children:[(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),w(a)},className:"w-12 h-12 bg-white text-navy rounded-full flex items-center justify-center shadow-2xl hover:bg-primary transition-all hover:scale-110",title:"แก้ไข",children:(0,b.jsx)("span",{className:"material-icons",children:"edit"})}),(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),y(a.id)},className:"w-12 h-12 bg-white text-red-500 rounded-full flex items-center justify-center shadow-2xl hover:bg-red-500 hover:text-white transition-all hover:scale-110",title:"ลบ",children:(0,b.jsx)("span",{className:"material-icons",children:"delete"})})]})]}),(0,b.jsxs)("div",{className:"p-6 flex-1 flex flex-col border-t-4",style:{borderColor:a.is_special?"#f2cc0d":"transparent"},children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,b.jsx)("h3",{className:"font-bold text-slate-800 text-lg leading-tight flex-1",children:a.title}),(0,b.jsxs)("span",{className:"text-xs font-bold text-slate-300 ml-2",children:["#",a.sort_order]})]}),(0,b.jsx)("p",{className:"text-sm text-slate-500 line-clamp-3 mb-4 leading-relaxed flex-1",children:a.description}),(0,b.jsxs)("div",{className:"flex gap-2 pt-4 border-t border-slate-50",children:[(0,b.jsxs)("button",{onClick:()=>w(a),className:"flex-1 flex items-center justify-center gap-1.5 py-2 px-3 bg-slate-50 text-slate-600 rounded-lg hover:bg-primary hover:text-navy transition-all font-bold text-sm",children:[(0,b.jsx)("span",{className:"material-icons text-sm",children:"edit"})," แก้ไขข้อมูล"]}),(0,b.jsx)("button",{onClick:()=>y(a.id),className:"w-10 h-10 flex items-center justify-center bg-red-50 text-red-500 rounded-lg hover:bg-red-500 hover:text-white transition-all",children:(0,b.jsx)("span",{className:"material-icons text-xl",children:"delete"})})]})]})]},a.id))})]})]})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=app_admin_courses_page_3b0d5068.js.map