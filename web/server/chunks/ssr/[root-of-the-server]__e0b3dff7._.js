module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},77860,a=>{"use strict";function b(a){return a?a.startsWith("http://")||a.startsWith("https://")||a.startsWith("data:")?a:a.startsWith("/uploads/")&&!a.startsWith("/web/uploads/")?`/web${a}`:!a.startsWith("/")&&[".jpg",".jpeg",".png",".gif",".svg",".webp",".pdf"].some(b=>a.toLowerCase().endsWith(b))?`/web/uploads/${a}`:a:""}a.s(["normalizePath",()=>b])},65233,a=>{"use strict";var b=a.i(87924);a.i(72131);var c=a.i(38246),d=a.i(50944);function e(){let a=(0,d.usePathname)();return(0,b.jsxs)("aside",{className:"admin-sidebar",children:[(0,b.jsxs)("div",{className:"sidebar-brand",children:[(0,b.jsx)("div",{className:"sidebar-logo",children:(0,b.jsx)("span",{className:"material-icons",children:"school"})}),(0,b.jsx)("span",{className:"sidebar-title",children:"SPICC ADMIN"})]}),(0,b.jsxs)("nav",{className:"sidebar-nav",children:[(0,b.jsx)("div",{className:"sidebar-nav-label",children:"Main Menu"}),[{name:"Dashboard",href:"/admin",icon:"dashboard"},{name:"จัดการส่วนหัว",href:"/admin/hero",icon:"view_carousel"},{name:"จัดการหน้าคั่น",href:"/admin/landing-page",icon:"auto_awesome"},{name:"จัดการหลักสูตร",href:"/admin/courses",icon:"school"},{name:"จัดการแผนกวิชา",href:"/admin/departments",icon:"category"},{name:"จัดการบุคลากร",href:"/admin/personnel",icon:"groups"},{name:"จัดการข่าวสาร",href:"/admin/news",icon:"newspaper"},{name:"จัดการเกี่ยวกับเรา",href:"/admin/about",icon:"info"},{name:"จัดการเมนู",href:"/admin/menus",icon:"sort"},{name:"จัดการเพจ",href:"/admin/pages",icon:"article"},{name:"จัดการส่วนท้าย",href:"/admin/footer",icon:"wrap_text"},{name:"ตั้งค่าเว็บไซต์",href:"/admin/settings",icon:"settings"}].map(d=>{let e=a===d.href;return(0,b.jsxs)(c.default,{href:d.href,className:`sidebar-link ${e?"active":""}`,children:[(0,b.jsx)("span",{className:"material-icons",children:d.icon}),d.name]},d.href)})]}),(0,b.jsx)("div",{className:"sidebar-footer",children:(0,b.jsx)("div",{className:"text-xs text-white/30 text-center",children:"Version 1.0.0"})})]})}a.s(["default",()=>e])},40705,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(65233),e=a.i(41227),f=a.i(77860);function g(){let{showToast:a}=(0,e.useToast)(),[g,h]=(0,c.useState)([]),[i,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)({}),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)({personnel_title:"คณะผู้บริหารและคณาจารย์",personnel_description:"ทีมผู้เชี่ยวชาญที่มีประสบการณ์ พร้อมถ่ายทอดความรู้และนวัตกรรมเพื่อส่งเสริมศักยภาพของผู้เรียนอย่างเต็มที่"}),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(!1);(0,c.useEffect)(()=>{w(),x()},[]);let w=async()=>{try{let a=await fetch("/web/api/personnel"),b=await a.json();b.success&&h(b.personnel)}catch(a){console.error("Error fetching personnel:",a)}finally{j(!1)}},x=async()=>{try{let a=await fetch("/web/api/personnel/settings"),b=await a.json();b.success&&b.settings&&r(b.settings)}catch(a){console.error("Error fetching settings:",a)}},y=a=>{let{name:b,value:c}=a.target;r(a=>({...a,[b]:c}))},z=async b=>{b.preventDefault(),v(!0);try{(await fetch("/web/api/personnel/settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(q)})).ok?(a("บันทึกการตั้งค่าส่วนหัวเรียบร้อยแล้ว","success"),t(!1)):a("ไม่สามารถบันทึกการตั้งค่าได้","error")}catch(b){a("เกิดข้อผิดพลาด: "+b.message,"error")}finally{v(!1)}},A=()=>{l(!1),n({})},B=a=>{let{name:b,value:c,type:d,checked:e}=a.target;n(a=>({...a,[b]:"checkbox"===d?e:c}))},C=async b=>{let c=b.target.files[0];if(!c)return;let d=new FormData;d.append("file",c);try{let b=await fetch("/web/api/upload",{method:"POST",body:d}),c=await b.json();c.success&&(n(a=>({...a,image:c.url})),a("อัปโหลดรูปภาพสำเร็จ","success"))}catch(b){a("อัปโหลดรูปภาพไม่สำเร็จ","error")}},D=async b=>{b.preventDefault(),p(!0);try{let b=m.id?"PUT":"POST";(await fetch("/web/api/personnel",{method:b,headers:{"Content-Type":"application/json"},body:JSON.stringify(m)})).ok?(await w(),l(!1),a("บันทึกข้อมูลบุคลากรเรียบร้อยแล้ว","success")):a("ไม่สามารถบันทึกข้อมูลได้","error")}catch(b){a("เกิดข้อผิดพลาด: "+b.message,"error")}finally{p(!1)}},E=async b=>{try{let c={...b,is_homepage:!b.is_homepage};(await fetch("/web/api/personnel",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).ok&&(w(),a("อัปเดตสถานะหน้าแรกเรียบร้อย","success"))}catch(a){console.error("Toggle homepage failed:",a)}},F=async b=>{if(confirm("Are you sure you want to delete this person?"))try{(await fetch(`/web/api/personnel?id=${b}`,{method:"DELETE"})).ok&&(w(),a("ลบข้อมูลบุคลากรเรียบร้อยแล้ว","success"))}catch(b){a("เกิดข้อผิดพลาดในการลบ: "+b.message,"error")}};return i?(0,b.jsx)("div",{className:"p-8",children:"Loading..."}):(0,b.jsxs)("div",{className:"admin-layout",children:[(0,b.jsx)(d.default,{}),(0,b.jsxs)("div",{className:"admin-content",children:[(0,b.jsxs)("header",{className:"admin-header",children:[(0,b.jsx)("div",{className:"admin-header-left",children:(0,b.jsx)("h1",{children:"จัดการบุคลากร (Personnel)"})}),(0,b.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[(0,b.jsxs)("button",{onClick:()=>t(!s),className:"btn-primary",style:{gap:"8px",border:s?"2px solid #f2cc0d":"none"},children:[(0,b.jsx)("span",{className:"material-icons",children:"settings"}),"ตั้งค่าส่วนหัว"]}),(0,b.jsxs)("button",{onClick:()=>{n({name:"",role:"",description:"",department:"ทั่วไป",image:"",sort_order:g.length+1,is_homepage:!1}),l(!0)},className:"btn-primary",style:{gap:"8px"},children:[(0,b.jsx)("span",{className:"material-icons",children:"add"}),"เพิ่มบุคลากร"]})]})]}),(0,b.jsxs)("main",{className:"admin-main",children:[s&&!k&&(0,b.jsxs)("div",{className:"editor-card",style:{marginBottom:"32px",border:"2px solid #e2e8f0"},children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,b.jsx)("h3",{style:{margin:0},children:"ตั้งค่าส่วนหัวของบุคลากร"}),(0,b.jsx)("button",{onClick:()=>t(!1),style:{background:"none",border:"none",cursor:"pointer",color:"#64748b"},children:(0,b.jsx)("span",{className:"material-icons",children:"close"})})]}),(0,b.jsxs)("form",{onSubmit:z,children:[(0,b.jsxs)("div",{className:"form-group",style:{marginBottom:"16px"},children:[(0,b.jsx)("label",{children:"ชื่อส่วนหัว (Title)"}),(0,b.jsx)("input",{type:"text",name:"personnel_title",value:q.personnel_title,onChange:y,placeholder:"เช่น คณะผู้บริหารและคณาจารย์",required:!0})]}),(0,b.jsxs)("div",{className:"form-group",style:{marginBottom:"16px"},children:[(0,b.jsx)("label",{children:"คำอธิบาย (Description)"}),(0,b.jsx)("textarea",{name:"personnel_description",value:q.personnel_description,onChange:y,rows:"3",placeholder:"รายละเอียดหรือสโลแกน...",required:!0})]}),(0,b.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,b.jsx)("button",{type:"submit",className:"btn-primary",disabled:u,children:u?"กำลังบันทึก...":"บันทึกการตั้งค่าส่วนหัว"})})]})]}),k?(0,b.jsxs)("div",{className:"editor-card",style:{maxWidth:"800px",margin:"0 auto"},children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[(0,b.jsx)("h2",{style:{margin:0},children:m.id?"แก้ไขข้อมูล":"เพิ่มบุคลากรใหม่"}),(0,b.jsx)("button",{onClick:A,style:{background:"none",border:"none",cursor:"pointer",color:"#64748b"},children:(0,b.jsx)("span",{className:"material-icons",children:"close"})})]}),(0,b.jsx)("form",{onSubmit:D,className:"login-form",children:(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"24px"},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{style:{width:"100%",aspectRatio:"3/4",background:"#f1f5f9",borderRadius:"8px",overflow:"hidden",marginBottom:"12px",border:"2px dashed #cbd5e1",display:"flex",alignItems:"center",justifyContent:"center"},children:m.image?(0,b.jsx)("img",{src:(0,f.normalizePath)(m.image),alt:"Preview",style:{width:"100%",height:"100%",objectFit:"cover"}}):(0,b.jsx)("span",{className:"material-icons",style:{fontSize:"48px",color:"#cbd5e1"},children:"person"})}),(0,b.jsx)("input",{type:"file",accept:"image/*",onChange:C,style:{width:"100%"}})]}),(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{children:"ชื่อ-นามสกุล"}),(0,b.jsx)("input",{type:"text",name:"name",required:!0,value:m.name||"",onChange:B,placeholder:"เช่น ดร. สมชาย มุ่งมั่น"})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{children:"ตำแหน่ง"}),(0,b.jsx)("input",{type:"text",name:"role",required:!0,value:m.role||"",onChange:B,placeholder:"เช่น คณบดีคณะบริหารธุรกิจ"})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{children:"คำอธิบาย"}),(0,b.jsx)("textarea",{name:"description",rows:"4",value:m.description||"",onChange:B,placeholder:"รายละเอียดความเชี่ยวชาญ..."})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{children:"แผนก/กลุ่ม"}),(0,b.jsx)("input",{type:"text",name:"department",required:!0,value:m.department||"",onChange:B,placeholder:"เช่น คณะกรรมการบริหาร"})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{children:"ลำดับการแสดงผล"}),(0,b.jsx)("input",{type:"number",name:"sort_order",value:m.sort_order||0,onChange:B})]}),(0,b.jsxs)("div",{className:"form-group",style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"10px",cursor:"pointer"},children:[(0,b.jsx)("input",{type:"checkbox",name:"is_homepage",id:"is_homepage",checked:m.is_homepage||!1,onChange:B,style:{width:"auto",margin:0}}),(0,b.jsx)("label",{htmlFor:"is_homepage",style:{marginBottom:0,cursor:"pointer"},children:"แสดงในหน้าแรก (Homepage)"})]}),(0,b.jsxs)("div",{style:{display:"flex",gap:"12px",marginTop:"8px"},children:[(0,b.jsx)("button",{type:"button",onClick:A,className:"btn-secondary",style:{flex:1,justifyContent:"center"},children:"ยกเลิก"}),(0,b.jsx)("button",{type:"submit",className:"btn-primary",disabled:o,style:{flex:1,justifyContent:"center"},children:o?"กำลังบันทึก...":"บันทึกข้อมูล"})]})]})]})})]}):(0,b.jsx)("div",{className:"admin-list-container",children:Object.entries(g.reduce((a,b)=>{let c=b.department||"ทั่วไป";return a[c]||(a[c]=[]),a[c].push(b),a},{})).sort(([a],[b])=>a.localeCompare(b)).map(([a,c])=>(0,b.jsxs)("div",{style:{marginBottom:"40px"},children:[(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px",padding:"8px 16px",background:"#f8fafc",borderRadius:"8px",borderLeft:"4px solid #2b4a8a"},children:[(0,b.jsxs)("h2",{style:{margin:0,fontSize:"20px",color:"#1e293b"},children:["แผนก: ",a]}),(0,b.jsxs)("span",{style:{background:"#e2e8f0",padding:"2px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"bold",color:"#64748b"},children:[c.length," คน"]})]}),(0,b.jsx)("div",{className:"admin-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"24px"},children:c.sort((a,b)=>a.sort_order-b.sort_order).map(a=>(0,b.jsxs)("div",{className:"admin-card",style:{background:"white",borderRadius:"12px",overflow:"hidden",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",border:a.is_homepage?"2px solid #2b4a8a":"1px solid #e2e8f0"},children:[(0,b.jsxs)("div",{style:{height:"280px",overflow:"hidden",position:"relative"},children:[(0,b.jsx)("img",{src:(0,f.normalizePath)(a.image||"https://via.placeholder.com/300x200?text=No+Image"),alt:a.name,style:{width:"100%",height:"100%",objectFit:"cover",objectPosition:"top"}}),(0,b.jsxs)("div",{style:{position:"absolute",top:"10px",right:"10px",background:"rgba(255,255,255,0.9)",padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",color:"#1e293b"},children:["#",a.sort_order]}),a.is_homepage?(0,b.jsxs)("button",{onClick:()=>E(a),style:{position:"absolute",top:"10px",left:"10px",background:"#2b4a8a",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"10px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"4px",border:"none",cursor:"pointer"},title:"คลิกเพื่อนำออกจากหน้าแรก",children:[(0,b.jsx)("span",{className:"material-icons",style:{fontSize:"12px"},children:"home"}),"หน้าแรก (แสดงอยู่)"]}):(0,b.jsxs)("button",{onClick:()=>E(a),style:{position:"absolute",top:"10px",left:"10px",background:"rgba(255,255,255,0.8)",color:"#64748b",padding:"4px 8px",borderRadius:"4px",fontSize:"10px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"4px",border:"1px solid #e2e8f0",cursor:"pointer"},title:"คลิกเพื่อแสดงในหน้าแรก",children:[(0,b.jsx)("span",{className:"material-icons",style:{fontSize:"12px"},children:"add_circle"}),"เพิ่มลงหน้าแรก"]})]}),(0,b.jsxs)("div",{style:{padding:"20px",flex:1,display:"flex",flexDirection:"column"},children:[(0,b.jsx)("h3",{style:{margin:"0 0 4px 0",fontSize:"18px",color:"#1e293b"},children:a.name}),(0,b.jsx)("p",{style:{margin:"0 0 8px 0",color:"#f2cc0d",fontSize:"14px",fontWeight:"600"},children:a.role}),(0,b.jsx)("p",{style:{margin:"0 0 20px 0",color:"#64748b",fontSize:"13px",lineHeight:"1.5",flex:1,height:"60px",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical"},children:a.description}),(0,b.jsxs)("div",{style:{display:"flex",gap:"10px",marginTop:"auto"},children:[(0,b.jsxs)("button",{onClick:()=>{n(a),l(!0)},className:"btn-secondary",style:{flex:1,padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px",background:"white",color:"#475569",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",fontSize:"14px"},children:[(0,b.jsx)("span",{className:"material-icons",style:{fontSize:"16px"},children:"edit"}),"แก้ไข"]}),(0,b.jsxs)("button",{onClick:()=>F(a.id),style:{flex:1,padding:"8px",border:"1px solid #fee2e2",borderRadius:"6px",background:"#fef2f2",color:"#ef4444",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",fontSize:"14px"},children:[(0,b.jsx)("span",{className:"material-icons",style:{fontSize:"16px"},children:"delete"}),"ลบ"]})]})]})]},a.id))})]},a))})]})]})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__e0b3dff7._.js.map