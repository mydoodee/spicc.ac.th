{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client.ts","../../../../lib/utils.js","../../../../app/news/page.js"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactServerDOMTurbopackClient\n","/**\r\n * Normalizes image and file URLs to include the correct base path.\r\n * If a URL starts with /uploads/, it prepends /web to match the basePath configuration.\r\n * @param {string} url - The URL to normalize.\r\n * @returns {string} - The normalized URL.\r\n */\r\nexport function normalizePath(url) {\r\n    if (!url) return \"\";\r\n\r\n    // If it's already an absolute URL (http/https), return as is\r\n    if (url.startsWith(\"http://\") || url.startsWith(\"https://\") || url.startsWith(\"data:\")) {\r\n        return url;\r\n    }\r\n\r\n    // If it starts with /uploads/ but not /web/uploads/, prepend /web\r\n    if (url.startsWith(\"/uploads/\") && !url.startsWith(\"/web/uploads/\")) {\r\n        return `/web${url}`;\r\n    }\r\n\r\n    // Handle raw filenames (e.g., \"123-photo.jpg\")\r\n    // If it doesn't start with / and has a common extension, assume it's an upload\r\n    const commonExtensions = ['.jpg', '.jpeg', '.png', '.gif', '.svg', '.webp', '.pdf'];\r\n    if (!url.startsWith(\"/\") && commonExtensions.some(ext => url.toLowerCase().endsWith(ext))) {\r\n        return `/web/uploads/${url}`;\r\n    }\r\n\r\n    return url;\r\n}\r\n","\"use client\";\r\nimport { useState, useEffect } from \"react\";\r\nimport Navbar from \"../components/Navbar\";\r\nimport Footer from \"../components/Footer\";\r\nimport Link from \"next/link\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { normalizePath } from \"@/lib/utils\";\r\n\r\nasync function getNews() {\r\n    try {\r\n        const res = await fetch('/web/api/news', { cache: 'no-store' });\r\n        if (!res.ok) throw new Error('Failed to fetch');\r\n        const data = await res.json();\r\n        return data.news || [];\r\n    } catch (e) {\r\n        console.error(\"Failed to fetch news:\", e);\r\n        return [];\r\n    }\r\n}\r\n\r\nexport default function NewsPage() {\r\n    const [news, setNews] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const loadNews = async () => {\r\n            const dbNews = await getNews();\r\n\r\n            // Default data if DB is empty\r\n            const defaultNews = [\r\n                {\r\n                    id: 1,\r\n                    title: \"พิธีรับประกาศนียบัตร ประจำปีการศึกษา 2566\",\r\n                    date: \"15 พฤศจิกายน 2566\",\r\n                    description: \"ขอแสดงความยินดีกับผู้สำเร็จการศึกษาทุกคนที่มุ่งมั่นตั้งใจ จนประสบความสำเร็จในวันนี้\",\r\n                    image: \"https://images.unsplash.com/photo-1523580494863-6f30312248f5?q=80&w=1920&auto=format&fit=crop\",\r\n                    category: \"Activity\",\r\n                    is_featured: true\r\n                },\r\n                {\r\n                    id: 2,\r\n                    title: \"งานวันก่อตั้งวิทยาลัย ครบรอบ 25 ปี\",\r\n                    date: \"20 ตุลาคม 2566\",\r\n                    description: \"ฉลองครบรอบ 25 ปี แห่งความภาคภูมิใจ พร้อมมุ่งสู่ความเป็นเลิศในทศวรรษหน้า\",\r\n                    image: \"https://images.unsplash.com/photo-1511578314322-379afb476865?q=80&w=1920&auto=format&fit=crop\",\r\n                    category: \"Activity\",\r\n                    is_featured: true\r\n                },\r\n                {\r\n                    id: 3,\r\n                    title: \"อบรมเชิงปฏิบัติการ: การออกแบบ User Experience\",\r\n                    date: \"12 พ.ย. 2566\",\r\n                    category: \"Workshop\",\r\n                    description: \"เรียนรู้หลักการออกแบบประสบการณ์ผู้ใช้งานอย่างมืออาชีพ พร้อมฝึกปฏิบัติจริง\",\r\n                    image: \"https://images.unsplash.com/photo-1531482615713-2afd69097998?q=80&w=1200&auto=format&fit=crop\",\r\n                    is_featured: false\r\n                }\r\n            ];\r\n\r\n            setNews(dbNews.length > 0 ? dbNews : defaultNews);\r\n            setLoading(false);\r\n        };\r\n\r\n        loadNews();\r\n    }, []);\r\n\r\n    // Helper to group news by year\r\n    const groupNewsByYear = (newsItems) => {\r\n        return newsItems.reduce((acc, item) => {\r\n            // Extract year (assume Thai year is 4 digits at the end or middle)\r\n            const yearMatch = item.date.match(/\\d{4}/);\r\n            const year = yearMatch ? yearMatch[0] : \"อื่นๆ\";\r\n\r\n            if (!acc[year]) acc[year] = [];\r\n            acc[year].push(item);\r\n            return acc;\r\n        }, {});\r\n    };\r\n\r\n    const groupedNews = groupNewsByYear(news);\r\n\r\n    if (loading) return (\r\n        <main className=\"min-h-screen bg-[#f8f8f5]\">\r\n            <Navbar />\r\n            <div className=\"pt-32 pb-20 flex justify-center items-center\">\r\n                <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2b4a8a]\"></div>\r\n            </div>\r\n            <Footer />\r\n        </main>\r\n    );\r\n\r\n    return (\r\n        <main className=\"min-h-screen bg-[#f8f8f5]\">\r\n            <Navbar />\r\n\r\n            {/* Header Section */}\r\n            <div className=\"pt-32 pb-12 bg-[#2b4a8a] text-white\">\r\n                <div className=\"max-w-7xl mx-auto px-6 text-center\">\r\n                    <h1 className=\"text-4xl font-bold mb-4\">ข่าวสารและกิจกรรมทั้งหมด</h1>\r\n                    <div className=\"w-20 h-1 bg-[#f2cc0d] mx-auto rounded-full mb-4\"></div>\r\n                    <p className=\"text-slate-300 max-w-2xl mx-auto\">\r\n                        รวบรวมข่าวสาร ความเคลื่อนไหว และกิจกรรมต่างๆ ของวิทยาลัยไว้ที่นี่\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* News Grid */}\r\n            <section className=\"py-16\">\r\n                <div className=\"max-w-7xl mx-auto px-6\">\r\n                    {Object.keys(groupedNews).sort((a, b) => b - a).map((year) => (\r\n                        <div key={year} className=\"mb-16\">\r\n                            <div className=\"flex items-center gap-4 mb-8\">\r\n                                <h2 className=\"text-2xl font-bold text-[#2b4a8a]\">พ.ศ. {year}</h2>\r\n                                <div className=\"flex-1 h-px bg-slate-200\"></div>\r\n                            </div>\r\n\r\n                            <div className=\"grid md:grid-cols-3 gap-8\">\r\n                                {groupedNews[year].map((item, index) => (\r\n                                    <div key={item.id || index}>\r\n                                        <Link\r\n                                            href={`/news/${item.slug || item.id}`}\r\n                                            className=\"group block bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-500 hover:-translate-y-2\"\r\n                                        >\r\n                                            {/* Image */}\r\n                                            <div className=\"relative h-56 overflow-hidden\">\r\n                                                <img\r\n                                                    alt={item.title}\r\n                                                    className=\"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110\"\r\n                                                    src={normalizePath(item.image)}\r\n                                                />\r\n                                                <div className=\"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500\"></div>\r\n\r\n                                                {/* Category Badge */}\r\n                                                <div className=\"absolute top-4 left-4\">\r\n                                                    <span className=\"px-3 py-1 bg-[#f2cc0d] text-[#2b4a8a] rounded-full text-xs font-bold\">\r\n                                                        {item.category}\r\n                                                    </span>\r\n                                                </div>\r\n\r\n                                                {item.is_featured && (\r\n                                                    <div className=\"absolute top-4 right-4\">\r\n                                                        <span className=\"px-3 py-1 bg-red-500 text-white rounded-full text-xs font-bold\">\r\n                                                            ข่าวเด่น\r\n                                                        </span>\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n\r\n                                            {/* Content */}\r\n                                            <div className=\"p-6\">\r\n                                                <div className=\"flex items-center gap-2 text-sm text-slate-500 mb-3\">\r\n                                                    <span className=\"material-icons text-base\">event</span>\r\n                                                    <span>{item.date}</span>\r\n                                                </div>\r\n\r\n                                                <h4 className=\"text-lg font-bold text-[#2b4a8a] mb-3 line-clamp-2 group-hover:text-[#f2cc0d] transition-colors leading-tight\">\r\n                                                    {item.title}\r\n                                                </h4>\r\n\r\n                                                <p className=\"text-sm text-slate-600 mb-4 line-clamp-3 leading-relaxed\">\r\n                                                    {item.description}\r\n                                                </p>\r\n\r\n                                                <div className=\"flex items-center gap-2 text-sm font-bold text-[#2b4a8a] group-hover:gap-3 transition-all\">\r\n                                                    อ่านรายละเอียด\r\n                                                    <span className=\"material-icons text-base group-hover:translate-x-1 transition-transform\">arrow_forward</span>\r\n                                                </div>\r\n                                            </div>\r\n                                        </Link>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n\r\n                    {news.length === 0 && (\r\n                        <div className=\"text-center py-20 text-slate-500\">\r\n                            <span className=\"material-icons text-6xl mb-4\">newspaper</span>\r\n                            <p className=\"text-xl\">ไม่พบข้อมูลข่าวสารในขณะนี้</p>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </section>\r\n\r\n\r\n\r\n            <Footer />\r\n        </main>\r\n    );\r\n}\r\n"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml","ReactJsxRuntime","ReactServerDOMTurbopackClient"],"mappings":"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","ignoreList":[0,1,2,3,4]}