{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client.ts","../../../../lib/utils.js","../../../../app/courses/page.js"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactServerDOMTurbopackClient\n","/**\r\n * Normalizes image and file URLs to include the correct base path.\r\n * If a URL starts with /uploads/, it prepends /web to match the basePath configuration.\r\n * @param {string} url - The URL to normalize.\r\n * @returns {string} - The normalized URL.\r\n */\r\nexport function normalizePath(url) {\r\n    if (!url) return \"\";\r\n\r\n    // If it's already an absolute URL (http/https), return as is\r\n    if (url.startsWith(\"http://\") || url.startsWith(\"https://\") || url.startsWith(\"data:\")) {\r\n        return url;\r\n    }\r\n\r\n    // If it starts with /uploads/ but not /web/uploads/, prepend /web\r\n    if (url.startsWith(\"/uploads/\") && !url.startsWith(\"/web/uploads/\")) {\r\n        return `/web${url}`;\r\n    }\r\n\r\n    // Handle raw filenames (e.g., \"123-photo.jpg\")\r\n    // If it doesn't start with / and has a common extension, assume it's an upload\r\n    const commonExtensions = ['.jpg', '.jpeg', '.png', '.gif', '.svg', '.webp', '.pdf'];\r\n    if (!url.startsWith(\"/\") && commonExtensions.some(ext => url.toLowerCase().endsWith(ext))) {\r\n        return `/web/uploads/${url}`;\r\n    }\r\n\r\n    return url;\r\n}\r\n","\"use client\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport Navbar from \"@/app/components/Navbar\";\r\nimport Footer from \"@/app/components/Footer\";\r\nimport Link from \"next/link\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { use } from \"react\";\r\nimport { normalizePath } from \"@/lib/utils\";\r\n\r\nexport default function CoursesPage() {\r\n    const [courses, setCourses] = useState([]);\r\n    const [settings, setSettings] = useState({\r\n        courses_title: \"หลักสูตรที่เปิดสอน\",\r\n        courses_description: \"หลากหลายสาขาวิชาที่ตอบโจทย์ความต้องการของตลาดโลก พร้อมอุปกรณ์การเรียนที่ทันสมัย\"\r\n    });\r\n    const [loading, setLoading] = useState(true);\r\n    const [selectedCourse, setSelectedCourse] = useState(null);\r\n    const router = useRouter();\r\n\r\n    const handleCourseClick = (course) => {\r\n        if (course.slug) {\r\n            router.push(`/courses/${course.slug}`);\r\n        } else {\r\n            setSelectedCourse(course);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                const [coursesRes, settingsRes] = await Promise.all([\r\n                    fetch(\"/web/api/courses\"),\r\n                    fetch(\"/web/api/courses/settings\")\r\n                ]);\r\n\r\n                const coursesData = await coursesRes.json();\r\n                const settingsData = await settingsRes.json();\r\n\r\n                if (coursesData.success) {\r\n                    setCourses(coursesData.courses.filter(c => c.is_active !== false));\r\n                }\r\n                if (settingsData.success && settingsData.settings) setSettings(settingsData.settings);\r\n\r\n                setLoading(false);\r\n            } catch (error) {\r\n                console.error(\"Failed to fetch courses:\", error);\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchData();\r\n    }, []);\r\n\r\n    return (\r\n        <main className=\"min-h-screen bg-slate-50\">\r\n            <Navbar />\r\n\r\n            {/* Header Section */}\r\n            <div className=\"pt-40 pb-24 bg-navy text-white relative overflow-hidden\">\r\n                <div className=\"absolute inset-0 opacity-20\">\r\n                    <div className=\"absolute top-0 right-0 w-[500px] h-[500px] bg-primary rounded-full blur-[120px] translate-x-1/2 -translate-y-1/2\"></div>\r\n                    <div className=\"absolute bottom-0 left-0 w-[500px] h-[500px] bg-secondary rounded-full blur-[120px] -translate-x-1/2 translate-y-1/2\"></div>\r\n                </div>\r\n\r\n                <div className=\"max-w-7xl mx-auto px-6 relative z-10 text-center\">\r\n                    <h1 className=\"text-5xl md:text-7xl font-black mb-8 animate-fade-in-up\">\r\n                        {settings.courses_title}\r\n                    </h1>\r\n                    <p className=\"text-white/70 max-w-3xl mx-auto text-xl leading-relaxed animate-fade-in-up animation-delay-200\">\r\n                        {settings.courses_description}\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Courses Grid */}\r\n            <section className=\"py-24 relative\">\r\n                <div className=\"max-w-7xl mx-auto px-6\">\r\n                    {loading ? (\r\n                        <div className=\"flex justify-center p-20\">\r\n                            <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary\"></div>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-10\">\r\n                            {courses.map((course, index) => (\r\n                                <div\r\n                                    key={course.id || index}\r\n                                    onClick={() => handleCourseClick(course)}\r\n                                    className=\"group bg-white rounded-[40px] overflow-hidden shadow-sm hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 border border-slate-100 flex flex-col cursor-pointer\"\r\n                                    style={{ animationDelay: `${index * 50}ms` }}\r\n                                >\r\n                                    <div className=\"relative h-64 overflow-hidden\">\r\n                                        {course.image ? (\r\n                                            <img\r\n                                                src={normalizePath(course.image)}\r\n                                                alt={course.title}\r\n                                                className=\"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110\"\r\n                                            />\r\n                                        ) : (\r\n                                            <div className={`w-full h-full ${course.color || 'bg-navy'} flex items-center justify-center`}>\r\n                                                <span className={`material-icons text-8xl ${course.text_color || 'text-white'} opacity-10`}>\r\n                                                    {course.icon || 'school'}\r\n                                                </span>\r\n                                            </div>\r\n                                        )}\r\n                                        <div className={`absolute top-6 right-6 w-14 h-14 rounded-2xl ${course.color || 'bg-white'} ${course.text_color || 'text-navy'} shadow-xl flex items-center justify-center transform group-hover:rotate-12 transition-transform`}>\r\n                                            <span className=\"material-icons text-3xl\">{course.icon || 'school'}</span>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"p-10 flex-1 flex flex-col\">\r\n                                        <h3 className=\"text-2xl font-bold text-navy mb-4 group-hover:text-primary transition-colors\">\r\n                                            {course.title}\r\n                                        </h3>\r\n                                        <p\r\n                                            className=\"text-slate-600 text-lg leading-relaxed mb-8 flex-1 line-clamp-3\"\r\n                                            dangerouslySetInnerHTML={{ __html: course.description?.replace(/<[^>]*>/g, '') }}\r\n                                        />\r\n                                        <div className=\"flex items-center text-primary font-bold group-hover:gap-2 transition-all\">\r\n                                            รายละเอียดหลักสูตร\r\n                                            <span className=\"material-icons ml-1 text-sm\">arrow_forward_ios</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </section>\r\n\r\n            {/* Modal - Reusing the same beautiful logic */}\r\n            {selectedCourse && (\r\n                <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4\">\r\n                    <div\r\n                        className=\"absolute inset-0 bg-navy/90 backdrop-blur-md transition-opacity duration-300\"\r\n                        onClick={() => setSelectedCourse(null)}\r\n                    ></div>\r\n\r\n                    <div className=\"relative bg-white w-full max-w-4xl max-h-[90vh] rounded-[40px] overflow-hidden shadow-2xl animate-in fade-in zoom-in duration-300 flex flex-col\">\r\n                        <button\r\n                            onClick={() => setSelectedCourse(null)}\r\n                            className=\"absolute top-6 right-6 z-10 w-12 h-12 bg-white/20 hover:bg-white/40 backdrop-blur-md rounded-full flex items-center justify-center text-white hover:rotate-90 transition-all border border-white/20\"\r\n                        >\r\n                            <span className=\"material-icons\">close</span>\r\n                        </button>\r\n\r\n                        <div className=\"overflow-y-auto custom-scrollbar\">\r\n                            <div className=\"h-72 md:h-96 relative\">\r\n                                {selectedCourse.image ? (\r\n                                    <img src={normalizePath(selectedCourse.image)} alt={selectedCourse.title} className=\"w-full h-full object-cover\" />\r\n                                ) : (\r\n                                    <div className={`w-full h-full ${selectedCourse.color} flex items-center justify-center`}>\r\n                                        <span className={`material-icons text-9xl ${selectedCourse.text_color} opacity-20 animate-pulse`}>{selectedCourse.icon}</span>\r\n                                    </div>\r\n                                )}\r\n                                <div className=\"absolute inset-0 bg-gradient-to-t from-white via-transparent to-transparent\"></div>\r\n                                <div className=\"absolute bottom-8 left-8 right-8\">\r\n                                    <h2 className=\"text-3xl md:text-5xl font-black text-navy\">{selectedCourse.title}</h2>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"p-8 md:p-12\">\r\n                                <div className=\"space-y-6\">\r\n                                    <h4 className=\"text-xl font-bold text-navy flex items-center gap-2\">\r\n                                        <span className=\"material-icons text-primary\">description</span>\r\n                                        รายละเอียดของหลักสูตร\r\n                                    </h4>\r\n                                    <div\r\n                                        className=\"text-lg text-slate-600 leading-relaxed prose prose-slate max-w-none\"\r\n                                        dangerouslySetInnerHTML={{ __html: selectedCourse.description }}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            <Footer />\r\n        </main>\r\n    );\r\n}\r\n"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml","ReactJsxRuntime","ReactServerDOMTurbopackClient"],"mappings":"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","ignoreList":[0,1,2,3,4]}