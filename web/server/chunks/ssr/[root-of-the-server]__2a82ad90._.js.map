{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client.ts","../../../../app/admin/components/AdminSidebar.js","../../../../app/admin/pages/page.js"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactServerDOMTurbopackClient\n","\"use client\";\r\nimport { useState, useEffect } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { usePathname } from \"next/navigation\";\r\n\r\nexport default function AdminSidebar() {\r\n    const pathname = usePathname();\r\n\r\n    const menuItems = [\r\n        { name: \"Dashboard\", href: \"/admin\", icon: \"dashboard\" },\r\n        { name: \"จัดการส่วนหัว\", href: \"/admin/hero\", icon: \"view_carousel\" },\r\n        { name: \"จัดการหน้าคั่น\", href: \"/admin/landing-page\", icon: \"auto_awesome\" },\r\n        { name: \"จัดการหลักสูตร\", href: \"/admin/courses\", icon: \"school\" },\r\n        { name: \"จัดการแผนกวิชา\", href: \"/admin/departments\", icon: \"category\" },\r\n        { name: \"จัดการบุคลากร\", href: \"/admin/personnel\", icon: \"groups\" },\r\n        { name: \"จัดการข่าวสาร\", href: \"/admin/news\", icon: \"newspaper\" },\r\n        { name: \"จัดการเกี่ยวกับเรา\", href: \"/admin/about\", icon: \"info\" },\r\n        { name: \"จัดการเมนู\", href: \"/admin/menus\", icon: \"sort\" },\r\n        { name: \"จัดการเพจ\", href: \"/admin/pages\", icon: \"article\" },\r\n        { name: \"จัดการส่วนท้าย\", href: \"/admin/footer\", icon: \"wrap_text\" },\r\n        { name: \"ตั้งค่าเว็บไซต์\", href: \"/admin/settings\", icon: \"settings\" },\r\n    ];\r\n\r\n    return (\r\n        <aside className=\"admin-sidebar\">\r\n            <div className=\"sidebar-brand\">\r\n                <div className=\"sidebar-logo\">\r\n                    <span className=\"material-icons\">school</span>\r\n                </div>\r\n                <span className=\"sidebar-title\">SPICC ADMIN</span>\r\n            </div>\r\n\r\n            <nav className=\"sidebar-nav\">\r\n                <div className=\"sidebar-nav-label\">Main Menu</div>\r\n                {menuItems.map((item) => {\r\n                    const isActive = pathname === item.href;\r\n                    return (\r\n                        <Link\r\n                            key={item.href}\r\n                            href={item.href}\r\n                            className={`sidebar-link ${isActive ? \"active\" : \"\"}`}\r\n                        >\r\n                            <span className=\"material-icons\">{item.icon}</span>\r\n                            {item.name}\r\n                        </Link>\r\n                    );\r\n                })}\r\n            </nav>\r\n\r\n            <div className=\"sidebar-footer\">\r\n                <div className=\"text-xs text-white/30 text-center\">Version 1.0.0</div>\r\n            </div>\r\n        </aside>\r\n    );\r\n}\r\n","'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport AdminSidebar from '../components/AdminSidebar';\r\n\r\nexport default function PagesListPage() {\r\n    const router = useRouter();\r\n    const [pages, setPages] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        checkAuth();\r\n    }, []);\r\n\r\n    const checkAuth = async () => {\r\n        const res = await fetch('/web/api/auth/me');\r\n        if (!res.ok) { router.push('/admin/login'); return; }\r\n        setLoading(false);\r\n        loadPages();\r\n    };\r\n\r\n    const loadPages = async () => {\r\n        const res = await fetch('/web/api/pages');\r\n        const data = await res.json();\r\n        setPages(data.pages || []);\r\n    };\r\n\r\n    const handleDelete = async (id) => {\r\n        if (!confirm('ยืนยันการลบเพจนี้?')) return;\r\n        await fetch(`/web/api/pages/${id}`, { method: 'DELETE' });\r\n        loadPages();\r\n    };\r\n\r\n    if (loading) {\r\n        return <div className=\"admin-loading\"><div className=\"admin-loading-spinner\"></div><p>กำลังโหลด...</p></div>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"admin-layout\">\r\n            <AdminSidebar />\r\n            <div className=\"admin-content\">\r\n                <header className=\"admin-header\">\r\n                    <div className=\"admin-header-left\"><h1>จัดการเพจ</h1></div>\r\n                    <div className=\"admin-header-right\">\r\n                        <button className=\"btn-primary\" onClick={() => router.push('/admin/pages/editor')}>\r\n                            <span className=\"material-icons\">add</span> สร้างเพจใหม่\r\n                        </button>\r\n                    </div>\r\n                </header>\r\n\r\n                <main className=\"admin-main\">\r\n                    {pages.length === 0 ? (\r\n                        <div className=\"empty-state\">\r\n                            <span className=\"material-icons\">article</span>\r\n                            <h3>ยังไม่มีเพจ</h3>\r\n                            <p>สร้างเพจแรกเพื่อใช้ในเว็บไซต์</p>\r\n                            <button className=\"btn-primary\" onClick={() => router.push('/admin/pages/editor')}>\r\n                                <span className=\"material-icons\">add</span> สร้างเพจใหม่\r\n                            </button>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"pages-table-wrap\">\r\n                            <table className=\"pages-table\">\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th>ชื่อเพจ</th>\r\n                                        <th>Slug</th>\r\n                                        <th>สถานะ</th>\r\n                                        <th>วันที่สร้าง</th>\r\n                                        <th>จัดการ</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {pages.map((page) => (\r\n                                        <tr key={page.id}>\r\n                                            <td className=\"page-title-cell\">\r\n                                                <span className=\"material-icons\">article</span>\r\n                                                <span>{page.title}</span>\r\n                                            </td>\r\n                                            <td>\r\n                                                <code className=\"slug-badge\">/page/{page.slug}</code>\r\n                                            </td>\r\n                                            <td>\r\n                                                <span className={`status-badge ${page.is_published ? 'published' : 'draft'}`}>\r\n                                                    {page.is_published ? 'เผยแพร่' : 'ฉบับร่าง'}\r\n                                                </span>\r\n                                            </td>\r\n                                            <td className=\"date-cell\">\r\n                                                {new Date(page.created_at).toLocaleDateString('th-TH', {\r\n                                                    year: 'numeric', month: 'short', day: 'numeric'\r\n                                                })}\r\n                                            </td>\r\n                                            <td>\r\n                                                <div className=\"table-actions\">\r\n                                                    <button className=\"btn-icon btn-edit\" title=\"แก้ไข\" onClick={() => router.push(`/admin/pages/editor?id=${page.id}`)}>\r\n                                                        <span className=\"material-icons\">edit</span>\r\n                                                    </button>\r\n                                                    <a className=\"btn-icon btn-view\" title=\"ดูหน้าเพจ\" href={`/page/${page.slug}`} target=\"_blank\">\r\n                                                        <span className=\"material-icons\">open_in_new</span>\r\n                                                    </a>\r\n                                                    <button className=\"btn-icon btn-delete\" title=\"ลบ\" onClick={() => handleDelete(page.id)}>\r\n                                                        <span className=\"material-icons\">delete</span>\r\n                                                    </button>\r\n                                                </div>\r\n                                            </td>\r\n                                        </tr>\r\n                                    ))}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    )}\r\n                </main>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml","ReactServerDOMTurbopackClient"],"mappings":"+iBAAAA,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACC,gBAAgB,+BCFvCJ,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACE,kBAAkB,+BCFzCL,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACG,kBAAkB,+BCFzCN,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,YAAY,CAAEI,6BAA6B,0CCDtD,EAAA,CAAA,CAAA,OACA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,IACpB,IAAM,EAAW,CAAA,EAAA,EAAA,WAAA,AAAW,IAiB5B,MACI,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,0BACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wBACX,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,0BAAiB,aAErC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yBAAgB,mBAGpC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wBACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6BAAoB,cAzB7B,AA0BL,CAzBT,CAAE,KAAM,YAAa,KAAM,SAAU,KAAM,WAAY,EACvD,CAAE,KAAM,gBAAiB,KAAM,cAAe,KAAM,eAAgB,EACpE,CAAE,KAAM,iBAAkB,KAAM,sBAAuB,KAAM,cAAe,EAC5E,CAAE,KAAM,iBAAkB,KAAM,iBAAkB,KAAM,QAAS,EACjE,CAAE,KAAM,iBAAkB,KAAM,qBAAsB,KAAM,UAAW,EACvE,CAAE,KAAM,gBAAiB,KAAM,mBAAoB,KAAM,QAAS,EAClE,CAAE,KAAM,gBAAiB,KAAM,cAAe,KAAM,WAAY,EAChE,CAAE,KAAM,qBAAsB,KAAM,eAAgB,KAAM,MAAO,EACjE,CAAE,KAAM,aAAc,KAAM,eAAgB,KAAM,MAAO,EACzD,CAAE,KAAM,YAAa,KAAM,eAAgB,KAAM,SAAU,EAC3D,CAAE,KAAM,iBAAkB,KAAM,gBAAiB,KAAM,WAAY,EACnE,CAAE,KAAM,kBAAmB,KAAM,kBAAmB,KAAM,UAAW,EACxE,CAasB,GAAG,CAAE,AAAD,IACX,IAAM,EAAW,IAAa,EAAK,IAAI,CACvC,MACI,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CAED,KAAM,EAAK,IAAI,CACf,UAAW,CAAC,aAAa,EAAE,EAAW,SAAW,GAAA,CAAI,WAErD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,0BAAkB,EAAK,IAAI,GAC1C,EAAK,IAAI,GALL,EAAK,IAAI,CAQ1B,MAGJ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0BACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6CAAoC,sBAInE,iECpDA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,IACpB,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,EAAE,EAC/B,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAEvC,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACN,GACJ,EAAG,EAAE,EAEL,IAAM,EAAY,UAEd,AAAK,CADO,GACR,GADc,MAAM,mBAAA,EACf,EAAE,EACX,AADa,GACF,GACX,KAFe,EAAO,IAAI,CAAC,eAG/B,EAEM,EAAY,UACd,IAAM,EAAM,MAAM,MAAM,kBAExB,EAAS,CADI,MAAM,EAAI,IAAI,EAAA,EACb,KAAK,EAAI,EAAE,CAC7B,EAEM,EAAe,MAAO,IACnB,QAAQ,uBAAuB,CACpC,MAAM,MAAM,CAAC,eAAe,EAAE,EAAA,CAAI,CAAE,CAAE,OAAQ,QAAS,GACvD,IACJ,SAEA,AAAI,EACO,CAAA,EAAA,EAAA,EADE,EACF,EAAC,MAAA,CAAI,UAAU,0BAAgB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0BAA8B,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,UAAE,oBAItF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yBACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAY,CAAA,CAAA,GACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BACX,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAAO,UAAU,yBACd,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6BAAoB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,gBACvC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8BACX,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAAO,UAAU,cAAc,QAAS,IAAM,EAAO,IAAI,CAAC,iCACvD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,0BAAiB,QAAU,wBAKvD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,sBACM,IAAjB,EAAM,MAAM,CACT,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wBACX,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,0BAAiB,YACjC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,gBACJ,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,UAAE,kCACH,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAAO,UAAU,cAAc,QAAS,IAAM,EAAO,IAAI,CAAC,iCACvD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,0BAAiB,QAAU,sBAInD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4BACX,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,wBACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UACG,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,WACG,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,YACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,SACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,UACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,gBACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,gBAGZ,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UACI,EAAM,GAAG,CAAC,AAAC,GACR,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,WACG,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,4BACV,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,0BAAiB,YACjC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAM,EAAK,KAAK,MAErB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UACG,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,uBAAa,SAAO,EAAK,IAAI,MAEjD,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UACG,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,CAAC,aAAa,EAAE,EAAK,YAAY,CAAG,YAAc,QAAA,CAAS,UACvE,EAAK,YAAY,CAAG,UAAY,eAGzC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBACT,IAAI,KAAK,EAAK,UAAU,EAAE,kBAAkB,CAAC,QAAS,CACnD,KAAM,UAAW,MAAO,QAAS,IAAK,SAC1C,KAEJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UACG,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BACX,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAU,oBAAoB,MAAM,QAAQ,QAAS,IAAM,EAAO,IAAI,CAAC,CAAC,uBAAuB,EAAE,EAAK,EAAE,CAAA,CAAE,WAC9G,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,0BAAiB,WAErC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oBAAoB,MAAM,YAAY,KAAM,CAAC,MAAM,EAAE,EAAK,IAAI,CAAA,CAAE,CAAE,OAAO,kBAClF,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,0BAAiB,kBAErC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAU,sBAAsB,MAAM,KAAK,QAAS,IAAM,EAAa,EAAK,EAAE,WAClF,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,0BAAiB,oBA3BxC,EAAK,EAAE,iBAyCxD","ignoreList":[0,1,2,3]}