{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client.ts","../../../../lib/utils.js","../../../../app/components/GalleryViewer.js"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactServerDOMTurbopackClient\n","/**\r\n * Normalizes image and file URLs to include the correct base path.\r\n * If a URL starts with /uploads/, it prepends /web to match the basePath configuration.\r\n * @param {string} url - The URL to normalize.\r\n * @returns {string} - The normalized URL.\r\n */\r\nexport function normalizePath(url) {\r\n    if (!url) return \"\";\r\n\r\n    // If it's already an absolute URL (http/https), return as is\r\n    if (url.startsWith(\"http://\") || url.startsWith(\"https://\") || url.startsWith(\"data:\")) {\r\n        return url;\r\n    }\r\n\r\n    // If it starts with /uploads/ but not /web/uploads/, prepend /web\r\n    if (url.startsWith(\"/uploads/\") && !url.startsWith(\"/web/uploads/\")) {\r\n        return `/web${url}`;\r\n    }\r\n\r\n    // Handle raw filenames (e.g., \"123-photo.jpg\")\r\n    // If it doesn't start with / and has a common extension, assume it's an upload\r\n    const commonExtensions = ['.jpg', '.jpeg', '.png', '.gif', '.svg', '.webp', '.pdf'];\r\n    if (!url.startsWith(\"/\") && commonExtensions.some(ext => url.toLowerCase().endsWith(ext))) {\r\n        return `/web/uploads/${url}`;\r\n    }\r\n\r\n    return url;\r\n}\r\n","'use client';\r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { normalizePath } from '@/lib/utils';\r\n\r\nexport default function GalleryViewer({ galleryJson }) {\r\n    const [isLightboxOpen, setIsLightboxOpen] = useState(false);\r\n    const [currentIndex, setCurrentIndex] = useState(0);\r\n    const [galleryItems, setGalleryItems] = useState([]);\r\n\r\n    useEffect(() => {\r\n        try {\r\n            const items = JSON.parse(galleryJson || '[]');\r\n            setGalleryItems(items);\r\n        } catch (e) {\r\n            console.error('Failed to parse gallery JSON:', e);\r\n            setGalleryItems([]);\r\n        }\r\n    }, [galleryJson]);\r\n\r\n    const onlyImages = galleryItems.filter(item => item.type === 'image');\r\n\r\n    const openLightbox = (imageIndex) => {\r\n        setCurrentIndex(imageIndex);\r\n        setIsLightboxOpen(true);\r\n        document.body.style.overflow = 'hidden';\r\n    };\r\n\r\n    const closeLightbox = () => {\r\n        setIsLightboxOpen(false);\r\n        document.body.style.overflow = 'auto';\r\n    };\r\n\r\n    const nextImage = useCallback(() => {\r\n        setCurrentIndex((prev) => (prev + 1) % onlyImages.length);\r\n    }, [onlyImages.length]);\r\n\r\n    const prevImage = useCallback(() => {\r\n        setCurrentIndex((prev) => (prev - 1 + onlyImages.length) % onlyImages.length);\r\n    }, [onlyImages.length]);\r\n\r\n    useEffect(() => {\r\n        const handleKeyDown = (e) => {\r\n            if (!isLightboxOpen) return;\r\n            if (e.key === 'ArrowRight') nextImage();\r\n            if (e.key === 'ArrowLeft') prevImage();\r\n            if (e.key === 'Escape') closeLightbox();\r\n        };\r\n        window.addEventListener('keydown', handleKeyDown);\r\n        return () => window.removeEventListener('keydown', handleKeyDown);\r\n    }, [isLightboxOpen, nextImage, prevImage]);\r\n\r\n    if (galleryItems.length === 0) return null;\r\n\r\n    const groups = Array.from(new Set(galleryItems.map(item => item.group || 'ทั่วไป'))).sort();\r\n\r\n    return (\r\n        <div className=\"mt-8\">\r\n            {groups.map(groupName => {\r\n                const groupItems = galleryItems.filter(item => (item.group || 'ทั่วไป') === groupName);\r\n                return (\r\n                    <div key={groupName} className=\"mb-12 last:mb-0\">\r\n                        <h3 className=\"text-xl font-bold text-slate-800 mb-6 flex items-center\">\r\n                            <span className=\"w-2 h-6 bg-[#f2cc0d] rounded-full mr-3\"></span>\r\n                            {groupName}\r\n                        </h3>\r\n                        <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6\">\r\n                            {groupItems.map((item) => {\r\n                                const imageIndex = onlyImages.findIndex(img => img.id === item.id);\r\n                                return (\r\n                                    <div key={item.id} className=\"group relative\">\r\n                                        {item.type === 'image' ? (\r\n                                            <div\r\n                                                onClick={() => openLightbox(imageIndex)}\r\n                                                className=\"cursor-pointer\"\r\n                                            >\r\n                                                <div className=\"aspect-square rounded-xl overflow-hidden border border-slate-200 hover:border-[#f2cc0d] transition-all shadow-sm hover:shadow-xl bg-white\">\r\n                                                    <img\r\n                                                        src={normalizePath(item.url)}\r\n                                                        alt={item.name || 'Gallery image'}\r\n                                                        className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500\"\r\n                                                    />\r\n                                                </div>\r\n                                            </div>\r\n                                        ) : (\r\n                                            <a\r\n                                                href={item.url}\r\n                                                target=\"_blank\"\r\n                                                rel=\"noopener noreferrer\"\r\n                                                className=\"block aspect-square rounded-xl border border-slate-200 hover:border-[#f2cc0d] transition-all shadow-sm hover:shadow-xl bg-white p-4\"\r\n                                            >\r\n                                                <div className=\"h-full flex flex-col items-center justify-center text-center\">\r\n                                                    <div className=\"w-16 h-16 bg-red-50 rounded-full flex items-center justify-center mb-3 group-hover:bg-red-100 transition-colors\">\r\n                                                        <span className=\"material-icons text-4xl text-[#ef4444]\">picture_as_pdf</span>\r\n                                                    </div>\r\n                                                    <span className=\"text-sm font-medium text-slate-700 line-clamp-2 px-2\">{item.name}</span>\r\n                                                </div>\r\n                                            </a>\r\n                                        )}\r\n                                    </div>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n                );\r\n            })}\r\n\r\n            {/* Lightbox Modal */}\r\n            {isLightboxOpen && onlyImages.length > 0 && (\r\n                <div className=\"fixed inset-0 z-[9999] flex items-center justify-center bg-black/95 p-4 md:p-10 backdrop-blur-sm\">\r\n                    <button\r\n                        onClick={closeLightbox}\r\n                        className=\"absolute top-6 right-6 text-white/70 hover:text-white transition-colors z-50 p-2\"\r\n                    >\r\n                        <span className=\"material-icons text-4xl\">close</span>\r\n                    </button>\r\n\r\n                    <div className=\"relative w-full h-full flex items-center justify-center\">\r\n                        {/* Navigation Buttons */}\r\n                        {onlyImages.length > 1 && (\r\n                            <>\r\n                                <button\r\n                                    onClick={(e) => { e.stopPropagation(); prevImage(); }}\r\n                                    className=\"absolute left-0 top-1/2 -translate-y-1/2 text-white/50 hover:text-white transition-all bg-white/5 hover:bg-white/10 p-3 rounded-full z-10\"\r\n                                >\r\n                                    <span className=\"material-icons text-4xl\">chevron_left</span>\r\n                                </button>\r\n                                <button\r\n                                    onClick={(e) => { e.stopPropagation(); nextImage(); }}\r\n                                    className=\"absolute right-0 top-1/2 -translate-y-1/2 text-white/50 hover:text-white transition-all bg-white/5 hover:bg-white/10 p-3 rounded-full z-10\"\r\n                                >\r\n                                    <span className=\"material-icons text-4xl\">chevron_right</span>\r\n                                </button>\r\n                            </>\r\n                        )}\r\n\r\n                        {/* Current Image */}\r\n                        <div className=\"max-w-full max-h-full flex flex-col items-center justify-center animate-in zoom-in duration-300\">\r\n                            <img\r\n                                src={normalizePath(onlyImages[currentIndex].url)}\r\n                                alt={onlyImages[currentIndex].name || \"\"}\r\n                                className=\"max-w-full max-h-[80vh] object-contain shadow-2xl rounded-sm\"\r\n                            />\r\n                            <div className=\"mt-4 text-white/50 text-sm\">\r\n                                {currentIndex + 1} / {onlyImages.length}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Background overlay click to close */}\r\n                    <div className=\"absolute inset-0 -z-10\" onClick={closeLightbox}></div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml","ReactJsxRuntime","ReactServerDOMTurbopackClient"],"mappings":"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","ignoreList":[0,1,2,3,4]}