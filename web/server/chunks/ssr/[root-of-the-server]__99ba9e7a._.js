module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},65233,a=>{"use strict";var b=a.i(87924);a.i(72131);var c=a.i(38246),d=a.i(50944);function e(){let a=(0,d.usePathname)();return(0,b.jsxs)("aside",{className:"admin-sidebar",children:[(0,b.jsxs)("div",{className:"sidebar-brand",children:[(0,b.jsx)("div",{className:"sidebar-logo",children:(0,b.jsx)("span",{className:"material-icons",children:"school"})}),(0,b.jsx)("span",{className:"sidebar-title",children:"SPICC ADMIN"})]}),(0,b.jsxs)("nav",{className:"sidebar-nav",children:[(0,b.jsx)("div",{className:"sidebar-nav-label",children:"Main Menu"}),[{name:"Dashboard",href:"/admin",icon:"dashboard"},{name:"จัดการส่วนหัว",href:"/admin/hero",icon:"view_carousel"},{name:"จัดการหน้าคั่น",href:"/admin/landing-page",icon:"auto_awesome"},{name:"จัดการหลักสูตร",href:"/admin/courses",icon:"school"},{name:"จัดการแผนกวิชา",href:"/admin/departments",icon:"category"},{name:"จัดการบุคลากร",href:"/admin/personnel",icon:"groups"},{name:"จัดการข่าวสาร",href:"/admin/news",icon:"newspaper"},{name:"จัดการเกี่ยวกับเรา",href:"/admin/about",icon:"info"},{name:"จัดการเมนู",href:"/admin/menus",icon:"sort"},{name:"จัดการเพจ",href:"/admin/pages",icon:"article"},{name:"จัดการส่วนท้าย",href:"/admin/footer",icon:"wrap_text"},{name:"ตั้งค่าเว็บไซต์",href:"/admin/settings",icon:"settings"}].map(d=>{let e=a===d.href;return(0,b.jsxs)(c.default,{href:d.href,className:`sidebar-link ${e?"active":""}`,children:[(0,b.jsx)("span",{className:"material-icons",children:d.icon}),d.name]},d.href)})]}),(0,b.jsx)("div",{className:"sidebar-footer",children:(0,b.jsx)("div",{className:"text-xs text-white/30 text-center",children:"Version 1.0.0"})})]})}a.s(["default",()=>e])},32318,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(65233),f=a.i(41227);function g(){let{showToast:a}=(0,f.useToast)(),g=(0,d.useRouter)(),[h,i]=(0,c.useState)(null),[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(!1);(0,c.useEffect)(()=>{t(),u()},[]);let t=async()=>{try{let a=await fetch("/web/api/auth/me");if(!a.ok)return void g.push("/admin/login");let b=await a.json();i(b.user)}catch{g.push("/admin/login")}},u=async()=>{try{let a=await fetch("/web/api/departments"),b=await a.json();b.success&&k(b.departments)}catch(a){console.error("Fetch failed:",a)}m(!1)},v=async b=>{b.preventDefault(),s(!0);let c=n.id?"PUT":"POST",d=n.id?`/web/api/departments/${n.id}`:"/web/api/departments";try{let b=await fetch(d,{method:c,headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),e=await b.json();e.success?(q(!1),u(),a(n.id?"แก้ไขแผนกวิชาเรียบร้อยแล้ว":"เพิ่มแผนกวิชาเรียบร้อยแล้ว","success")):a(e.error||"ไม่สามารถบันทึกข้อมูลได้","error")}catch(b){a("เกิดข้อผิดพลาด: "+b.message,"error")}s(!1)},w=async b=>{if(confirm("คุณแน่ใจหรือไม่ที่จะลบแผนกนี้?"))try{let c=await fetch(`/web/api/departments/${b}`,{method:"DELETE"});(await c.json()).success&&(u(),a("ลบแผนกวิชาเรียบร้อยแล้ว","success"))}catch(b){a("เกิดข้อผิดพลาดในการลบ: "+b.message,"error")}},x=async()=>{await fetch("/web/api/auth/logout",{method:"POST"}),g.push("/admin/login")},y=(a=null)=>{a?o({...a}):o({title:"",slug:"",description:"",icon:"category",color:"bg-navy",is_active:1,sort_order:0}),q(!0)};return l?(0,b.jsxs)("div",{className:"admin-loading",children:[(0,b.jsx)("div",{className:"admin-loading-spinner"}),(0,b.jsx)("p",{children:"กำลังโหลด..."})]}):(0,b.jsxs)("div",{className:"admin-layout",children:[(0,b.jsx)(e.default,{}),(0,b.jsxs)("div",{className:"admin-content",children:[(0,b.jsxs)("header",{className:"admin-header",children:[(0,b.jsx)("div",{className:"admin-header-left",children:(0,b.jsx)("h1",{children:"จัดการแผนกวิชา"})}),(0,b.jsxs)("div",{className:"admin-header-right",children:[(0,b.jsxs)("div",{className:"admin-user-info",children:[(0,b.jsx)("span",{className:"material-icons",children:"account_circle"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"admin-user-name",children:h?.display_name||h?.username}),(0,b.jsx)("span",{className:"admin-user-role",children:h?.role})]})]}),(0,b.jsxs)("button",{onClick:x,className:"admin-logout-btn",children:[(0,b.jsx)("span",{className:"material-icons",children:"logout"}),"ออกจากระบบ"]})]})]}),(0,b.jsxs)("main",{className:"admin-main",children:[(0,b.jsxs)("div",{className:"admin-section-header",children:[(0,b.jsxs)("div",{className:"admin-section-info",children:[(0,b.jsxs)("h2",{className:"admin-section-title",children:[(0,b.jsx)("span",{className:"material-icons",children:"category"}),"รายการแผนกวิชาทั้งหมด"]}),(0,b.jsx)("p",{className:"admin-section-desc",children:"จัดการข้อมูลแผนกวิชาที่แสดงในหน้าแรกของเว็บไซต์"})]}),(0,b.jsxs)("button",{onClick:()=>y(),className:"bg-[#2b4a8a] text-white px-6 py-2 rounded-lg font-bold flex items-center gap-2 hover:bg-[#1a365d] transition-all",children:[(0,b.jsx)("span",{className:"material-icons",children:"add"}),"เพิ่มแผนกใหม่"]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6",children:j.map(a=>(0,b.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-slate-100 hover:shadow-md transition-shadow",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,b.jsx)("div",{className:`w-14 h-14 rounded-xl ${a.color} flex items-center justify-center text-white shadow-lg`,children:(0,b.jsx)("span",{className:"material-icons text-3xl",children:a.icon})}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>y(a),className:"p-2 text-slate-400 hover:text-[#2b4a8a] transition-colors",children:(0,b.jsx)("span",{className:"material-icons",children:"edit"})}),(0,b.jsx)("button",{onClick:()=>w(a.id),className:"p-2 text-slate-400 hover:text-red-500 transition-colors",children:(0,b.jsx)("span",{className:"material-icons",children:"delete"})})]})]}),(0,b.jsx)("h3",{className:"text-lg font-bold text-[#2b4a8a] mb-2",children:a.title}),(0,b.jsx)("p",{className:"text-sm text-slate-500 line-clamp-2 mb-4",children:a.description}),(0,b.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-slate-50",children:[(0,b.jsx)("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-bold uppercase ${a.is_active?"bg-green-100 text-green-700":"bg-slate-100 text-slate-500"}`,children:a.is_active?"Active":"Draft"}),(0,b.jsxs)("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:["Order: ",a.sort_order]})]})]},a.id))})]})]}),p&&(0,b.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:()=>q(!1)}),(0,b.jsx)("div",{className:"relative bg-white w-full max-w-2xl rounded-[32px] shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-200",children:(0,b.jsxs)("div",{className:"p-8",children:[(0,b.jsxs)("h2",{className:"text-2xl font-bold text-[#2b4a8a] mb-6 flex items-center gap-3",children:[(0,b.jsx)("span",{className:"material-icons bg-blue-50 p-2 rounded-xl text-[#2b4a8a]",children:n.id?"edit":"add"}),n.id?"แก้ไขแผนกวิชา":"เพิ่มแผนกวิชาใหม่"]}),(0,b.jsxs)("form",{onSubmit:v,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-bold text-slate-400 uppercase tracking-widest mb-2",children:"ชื่อแผนก (ภาษาไทย)"}),(0,b.jsx)("input",{type:"text",value:n.title,onChange:a=>o({...n,title:a.target.value}),className:"w-full px-4 py-2 bg-slate-50 border-none rounded-xl focus:ring-2 focus:ring-[#2b4a8a] outline-none",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-bold text-slate-400 uppercase tracking-widest mb-2",children:"Slug (URL)"}),(0,b.jsx)("input",{type:"text",value:n.slug,onChange:a=>o({...n,slug:a.target.value}),className:"w-full px-4 py-2 bg-slate-50 border-none rounded-xl focus:ring-2 focus:ring-[#2b4a8a] outline-none",required:!0})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-bold text-slate-400 uppercase tracking-widest mb-2",children:"คำอธิบายย่อ"}),(0,b.jsx)("textarea",{value:n.description,onChange:a=>o({...n,description:a.target.value}),className:"w-full px-4 py-2 bg-slate-50 border-none rounded-xl focus:ring-2 focus:ring-[#2b4a8a] outline-none h-24 resize-none"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-bold text-slate-400 uppercase tracking-widest mb-3",children:"ไอคอน"}),(0,b.jsx)("div",{className:"grid grid-cols-5 gap-2 bg-slate-50 p-3 rounded-2xl",children:["school","settings_suggest","bolt","computer","account_balance","construction","precision_manufacturing","electric_car","architecture","psychology","biotech","design_services","palette","business","category"].map(a=>(0,b.jsx)("button",{type:"button",onClick:()=>o({...n,icon:a}),className:`p-2 rounded-xl border-2 flex items-center justify-center hover:bg-white transition-all ${n.icon===a?"border-[#2b4a8a] bg-white ring-4 ring-blue-50":"border-transparent"}`,children:(0,b.jsx)("span",{className:"material-icons text-xl",children:a})},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-bold text-slate-400 uppercase tracking-widest mb-3",children:"สีธีม"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2 bg-slate-50 p-3 rounded-2xl",children:[{name:"Navy",class:"bg-navy"},{name:"Yellow",class:"bg-yellow-500"},{name:"Red",class:"bg-red-500"},{name:"Blue",class:"bg-blue-500"},{name:"Green",class:"bg-green-500"},{name:"Purple",class:"bg-purple-500"},{name:"Pink",class:"bg-pink-500"}].map(a=>(0,b.jsx)("button",{type:"button",onClick:()=>o({...n,color:a.class}),className:`w-8 h-8 rounded-full border-2 transition-transform hover:scale-110 ${a.class} ${n.color===a.class?"border-[#2b4a8a] scale-110 ring-4 ring-blue-50":"border-transparent"}`,title:a.name},a.class))})]})]}),(0,b.jsxs)("div",{className:"flex grid grid-cols-2 gap-4 bg-slate-50 p-4 rounded-2xl",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"relative inline-block w-12 h-6 transition duration-200 ease-in-out bg-slate-200 rounded-full cursor-pointer",children:(0,b.jsx)("input",{type:"checkbox",id:"is_active_toggle",checked:n.is_active,onChange:a=>o({...n,is_active:+!!a.target.checked}),className:"absolute w-6 h-6 p-0 m-0 transition duration-200 ease-in-out bg-white border-2 border-slate-200 rounded-full appearance-none cursor-pointer checked:translate-x-6 checked:border-[#2b4a8a]"})}),(0,b.jsx)("label",{htmlFor:"is_active_toggle",className:"text-sm font-bold text-slate-600",children:"แสดงผลบนเว็บไซต์"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 justify-end",children:[(0,b.jsx)("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"ลำดับ:"}),(0,b.jsx)("input",{type:"number",value:n.sort_order,onChange:a=>o({...n,sort_order:parseInt(a.target.value)}),className:"w-16 px-3 py-1 bg-white border border-slate-100 rounded-lg focus:ring-2 focus:ring-[#2b4a8a] outline-none text-center font-bold"})]})]}),(0,b.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,b.jsx)("button",{type:"button",onClick:()=>q(!1),className:"flex-1 px-6 py-4 text-slate-400 font-bold hover:text-slate-600 transition-colors",children:"ยกเลิก"}),(0,b.jsx)("button",{type:"submit",disabled:r,className:"flex-1 px-6 py-4 bg-[#2b4a8a] text-white rounded-2xl font-bold hover:bg-[#1a365d] shadow-xl shadow-[#2b4a8a]/20 disabled:opacity-50 transition-all active:scale-95",children:r?"กำลังบันทึก...":"บันทึกข้อมูล"})]})]})]})})]})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__99ba9e7a._.js.map